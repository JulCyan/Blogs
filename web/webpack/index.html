<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 3.0 | JulCyan</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Full Stack Developer&#39; Blogs">
    
    <link rel="preload" href="/Blogs/assets/css/0.styles.27194dfd.css" as="style"><link rel="preload" href="/Blogs/assets/js/app.db3e0e22.js" as="script"><link rel="preload" href="/Blogs/assets/js/2.35186d10.js" as="script"><link rel="preload" href="/Blogs/assets/js/1.fffe7ab9.js" as="script"><link rel="preload" href="/Blogs/assets/js/50.699bf205.js" as="script"><link rel="prefetch" href="/Blogs/assets/js/10.f25107a7.js"><link rel="prefetch" href="/Blogs/assets/js/11.30bbd869.js"><link rel="prefetch" href="/Blogs/assets/js/12.a2468d2b.js"><link rel="prefetch" href="/Blogs/assets/js/13.58ac2719.js"><link rel="prefetch" href="/Blogs/assets/js/14.1f92550b.js"><link rel="prefetch" href="/Blogs/assets/js/15.a627f94f.js"><link rel="prefetch" href="/Blogs/assets/js/16.5440ab9e.js"><link rel="prefetch" href="/Blogs/assets/js/17.77226d86.js"><link rel="prefetch" href="/Blogs/assets/js/18.50cd59ed.js"><link rel="prefetch" href="/Blogs/assets/js/19.b62f168c.js"><link rel="prefetch" href="/Blogs/assets/js/20.3fc70535.js"><link rel="prefetch" href="/Blogs/assets/js/21.871df693.js"><link rel="prefetch" href="/Blogs/assets/js/22.28d8f07e.js"><link rel="prefetch" href="/Blogs/assets/js/23.32dbe1c3.js"><link rel="prefetch" href="/Blogs/assets/js/24.1e78bc6c.js"><link rel="prefetch" href="/Blogs/assets/js/25.f542fdad.js"><link rel="prefetch" href="/Blogs/assets/js/26.5276b3e4.js"><link rel="prefetch" href="/Blogs/assets/js/27.a59a3f6b.js"><link rel="prefetch" href="/Blogs/assets/js/28.c27b07f5.js"><link rel="prefetch" href="/Blogs/assets/js/29.2cb4f680.js"><link rel="prefetch" href="/Blogs/assets/js/3.20f8d34b.js"><link rel="prefetch" href="/Blogs/assets/js/30.a59cc4b1.js"><link rel="prefetch" href="/Blogs/assets/js/31.16071b8c.js"><link rel="prefetch" href="/Blogs/assets/js/32.4b22379a.js"><link rel="prefetch" href="/Blogs/assets/js/33.5b07cb45.js"><link rel="prefetch" href="/Blogs/assets/js/34.23e4fd9b.js"><link rel="prefetch" href="/Blogs/assets/js/35.5fdf0839.js"><link rel="prefetch" href="/Blogs/assets/js/36.4a0eaf53.js"><link rel="prefetch" href="/Blogs/assets/js/37.57a4e65e.js"><link rel="prefetch" href="/Blogs/assets/js/38.1b12131b.js"><link rel="prefetch" href="/Blogs/assets/js/39.1abf68d6.js"><link rel="prefetch" href="/Blogs/assets/js/4.0da7c676.js"><link rel="prefetch" href="/Blogs/assets/js/40.d5a31a65.js"><link rel="prefetch" href="/Blogs/assets/js/41.b6ff0c9d.js"><link rel="prefetch" href="/Blogs/assets/js/42.8f3d0d03.js"><link rel="prefetch" href="/Blogs/assets/js/43.3ba106c6.js"><link rel="prefetch" href="/Blogs/assets/js/44.8f9ecf3b.js"><link rel="prefetch" href="/Blogs/assets/js/45.200608ae.js"><link rel="prefetch" href="/Blogs/assets/js/46.e1bdf9f0.js"><link rel="prefetch" href="/Blogs/assets/js/47.6f4f7895.js"><link rel="prefetch" href="/Blogs/assets/js/48.55768132.js"><link rel="prefetch" href="/Blogs/assets/js/49.6620815d.js"><link rel="prefetch" href="/Blogs/assets/js/5.b8cecc7b.js"><link rel="prefetch" href="/Blogs/assets/js/6.2fcecb9b.js"><link rel="prefetch" href="/Blogs/assets/js/7.82c0cba4.js"><link rel="prefetch" href="/Blogs/assets/js/vendors~docsearch.ab6fac7c.js">
    <link rel="stylesheet" href="/Blogs/assets/css/0.styles.27194dfd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blogs/" class="home-link router-link-active"><!----> <span class="site-name">JulCyan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blogs/web/basics/html/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/Blogs/web/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Blogs/web/webpack/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/Blogs/web/node/" class="nav-link">
  Node.js
</a></li></ul></div></div><div class="nav-item"><a href="/Blogs/backend/" class="nav-link">
  Backend
</a></div><div class="nav-item"><a href="/Blogs/ops/linux.html" class="nav-link">
  OPS
</a></div><div class="nav-item"><a href="/Blogs/article/technologySelection.html" class="nav-link">
  Article
</a></div><div class="nav-item"><a href="/Blogs/repositories/" class="nav-link">
  Repositories
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blogs/web/basics/html/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/Blogs/web/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Blogs/web/webpack/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/Blogs/web/node/" class="nav-link">
  Node.js
</a></li></ul></div></div><div class="nav-item"><a href="/Blogs/backend/" class="nav-link">
  Backend
</a></div><div class="nav-item"><a href="/Blogs/ops/linux.html" class="nav-link">
  OPS
</a></div><div class="nav-item"><a href="/Blogs/article/technologySelection.html" class="nav-link">
  Article
</a></div><div class="nav-item"><a href="/Blogs/repositories/" class="nav-link">
  Repositories
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blogs/web/webpack/" aria-current="page" class="active sidebar-link">Basics</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-3-0"><a href="#webpack-3-0" class="header-anchor">#</a> webpack 3.0</h1> <p>全局安装 webpack npm install webpack -g</p> <p>4.0 以上版本需要 额外配置 npm install webpack-cli -g</p> <p>##<strong>webpack</strong></p> <p>手动打包</p> <p>​	命令行: webpack 目标文件相对路径 --output 打包结果路径(3.0版本不用 --output)</p> <p>##<strong>webpack.config.js</strong></p> <p>根据配置文件自动打包</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> path 	<span class="token comment">// 此处path为绝对路径</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    	<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">,</span>
    	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> 	<span class="token comment">// 打包文件名</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 配置 webpack-dev-server</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>命令行: webpack</p> <p>##<strong><code>webpack-dev-server</code></strong></p> <p>根据配置文件并监听打包文件变化</p> <p>​	本地安装 npm install webpack-dev-server -D</p> <p>​	依赖于本地 webpack, so  npm install webpack -D</p> <p>​	写好 webpack.config.js 配置文件</p> <p>​	在 package.json  script 项内添加脚本命令:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code> <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --open --port 3000 --contentBase src --hot --mode development&quot;</span>
 	键<span class="token operator">:</span> 定义快捷启用指令名
 	param1<span class="token operator">:</span> 需要使用的命令
 	param2<span class="token operator">:</span> --open 自动打开url
 	parma3<span class="token operator">:</span> --port xxxx 指定端口号 (默认<span class="token number">8080</span>)
 	parma4<span class="token operator">:</span> --contentBase xxx 指定打开的目录 (默认是根目录)
 	param5<span class="token operator">:</span> --hot 实现补丁打包以及页面无刷新重载 =&gt; 热更新

	※※<span class="token operator">:</span> 
	param6<span class="token operator">:</span> --mode 选择模式<span class="token punctuation">,</span> 自动相应模式的配置
		development(开发模式) 针对速度进行了优化，仅仅提供了一种不压缩的 bundle
		production(生产模式) 可以开箱即用地进行各种优化<span class="token punctuation">,</span> 包括压缩，作用域提升，tree-shaking 等
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>​	运行: npm run dev</p> <p>由 webpack-dev-server 打包的文件, 并没有存在本地, 而是存在内存中</p> <p>如需访问则直接在 localhost 根目录下 /文件名进行访问</p> <p>​</p> <p>##<strong>html-webpack-plugin</strong></p> <p>cnpm install html-webpack-plugin -D</p> <p>1: 将本地物理磁盘中指定的文件生成在内存中</p> <p>2: 自动引用打包好的文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> htmlWebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

modul<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">htmlWebpackplugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 需要转换的文件路径</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 转换后的文件名</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>##<strong>loader</strong></p> <p>加载器</p> <p>webpack 默认只能打包 js 文件, 如果要打包其他后缀的文件需要使用第三方加载器</p> <p>以 .css 为例</p> <p>首先安装 npm install style-loader css-loader -D 两个第三方加载器</p> <p>然后在 webpack.config.js 配置文件中</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在导出配置文件 module 配置节点的 rules 属性上配置打包规则</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">// test: 匹配规则</span>
            <span class="token comment">// use: 匹配成功后使用的加载器</span>
            <span class="token comment">// 加载器的调用顺序是从后向前</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>.less(css) =&gt; less-loader, 还需要下载 less到本地开发依赖, 但无需在 config 里配置</p> <p>.scss/.sass(css) =&gt; sass-loader 还需要下载 node-sass</p> <p>.jpg/.png/.gif/.bmp/.jpeg(image) =&gt; url-loader 追加?键值对配置, 与url无异</p> <p>limit: byte, 大于或等于配置值的图片不会被转为base64格式</p> <p>name: String, 指定转换的文件名 [hash:8]-[name].[ext] =&gt; hash值-文件原名-原后缀名</p> <p>.ttf/.eot/.svg/.woff/.woff2(iconfont) =&gt; url-loader</p> <h3 id="babel-loader-8"><a href="#babel-loader-8" class="header-anchor">#</a> babel-loader@8+</h3> <p>ES6高级/ES7 =&gt; babel-loader</p> <p>cnpm install babel-loader @babel/core @babel/plugin-transform-runtime @babel/preset-env -D</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span>
    <span class="token comment">// exclude: 排除项</span>
    <span class="token comment">// why? 编译多余已打包好的js文件浪费性能且 转换后也是不可用的</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>项目根目录下新建 .babelrc 文件, 格式为JSON(JSON文件不能有注释)</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 配置编译语法, 高级语法与低级语法的对应关系</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">]</span> <span class="token comment">// 配置编译使用的插件</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="vue-loader"><a href="#vue-loader" class="header-anchor">#</a> vue-loader</h3> <p>.vue =&gt; cnpm i vue-loader vue-template-compiler -D</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;vue-loader&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue-loader/lib/plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pulgins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="url-loader"><a href="#url-loader" class="header-anchor">#</a> url-loader</h3> <ol><li><p>文件 byte 小于limit 参数，url-loader将会把文件转为 DataURL</p></li> <li><p>文件 byte 大于limit 参数，url-loader会调用file-loader进行处理，参数也会直接传给 file-loader</p> <p>context: 基本目录，一个<strong>绝对路径</strong>，用于从配置中解析入口点和加载器, 默认当前目录</p> <p>在 webpack.config.js 进行配置</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token string">&quot;\.(png|jpg|gif)$/&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">7621</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;[path][name].[ext]&quot;</span><span class="token punctuation">,</span>
                <span class="token comment">// or</span>
                <span class="token function">name</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 如果是开发模式返回相对于 context 路径的原文件名</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>env <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token string">'[path][name].[ext]'</span>
                    <span class="token punctuation">}</span>
      				<span class="token keyword">return</span> <span class="token string">'[hash].[ext]'</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">// 不写 publicPath 情况下默认用输出路径, 写了两者要保持一致或与资源原名原路径相同</span>
                <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;文件引用路径&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 相对 contentPath</span>
                <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">&quot;文件输出目录&quot;</span><span class="token punctuation">,</span><span class="token comment">// 路径最后要加 /</span>
                <span class="token comment">// outputPath: &quot;/&quot; 原资源引用</span>
                <span class="token literal-property property">useRelativePath</span><span class="token operator">:</span> <span class="token string">&quot;生成相对context 的url, bool;default: false&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>[hash]: <code>[&lt;hashType&gt;:hash:&lt;digestType&gt;:&lt;length&gt;]</code></p> <p>hashType:   {String}	md5	sha1, md5, sha256, sha512;</p> <p>digestType: {String}	base64  hex, base62, base64...</p> <p>length:     {Number}	9999    字符串的长度</p> <h1 id="webpack-4-0"><a href="#webpack-4-0" class="header-anchor">#</a> webpack 4.0</h1> <p><em><strong><code>零配置工具</code></strong></em></p> <p>npm i webpack webpack-cli -D</p> <p>packag.json 内 script 配置 webpack or webpack-dev-server</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>无需配置 webpack.config.js</p> <p>why? =&gt; 使用零配置工具可以加快速度</p> <p>零配置只包括 mode, entry, output</p> <p>自动查找 <code>./src/index.js</code> 作为默认入口点。 而且，它会在 <code>./dist/main.js</code> 中输出模块包</p> <p>关于 webpack-dev-server 配置见上, 其中 --mode 配置项 是 webpack 4.0 中新增的</p> <h3 id="将-css-提取到一个文件中"><a href="#将-css-提取到一个文件中" class="header-anchor">#</a> 将 CSS 提取到一个文件中</h3> <ol><li><p>npm i mini-css-extract-plugin css-loader -D</p></li> <li><p>webpack.config.js</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">&quot;[id].css&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="html-webpack-插件"><a href="#html-webpack-插件" class="header-anchor">#</a> HTML webpack 插件</h3> <ol><li>npm i html-webpack-plugin html-loader -D</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebPackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;html-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebPackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="移除webpack打包bundle-js使用严格模式"><a href="#移除webpack打包bundle-js使用严格模式" class="header-anchor">#</a> 移除webpack打包bundle.js使用严格模式</h3> <p>npm install babel-plugin-transform-remove-strict-mode -D</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;transform-remove-strict-mode&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Blogs/assets/js/app.db3e0e22.js" defer></script><script src="/Blogs/assets/js/2.35186d10.js" defer></script><script src="/Blogs/assets/js/1.fffe7ab9.js" defer></script><script src="/Blogs/assets/js/50.699bf205.js" defer></script>
  </body>
</html>
